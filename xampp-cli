#!/bin/bash
#
# XAMPP-CLI
# ------------------------
# Command line interface for a XAMPP
# 
# Based on XAMPP (XAMPP Starter) by Ziyaddin Sadigov:
# http://github.com/ziyaddin/xampp
# 
# Author: Denys Dovhan (email@denysdovhan.com)
# 


# Default commands
# -----------------

DEFAULT_COMMANDS="
  start  startapache  startmysql  startftp
  stop   stopapache   stopmysql   stopftp 
  reload reloadapache reloadmysql reloadftp
  backup restart      security    oci8
  enablessl disablessl"

# Check if user have sudo access
# Usage: check_sudo
function check_sudo {
  if [ "$EUID" -ne 0 ]; then
    echo "(!)You need to be root to perform this action."
    exit
  fi
}


if [[ ! -z $1 ]]; then
  if [[ $DEFAULT_COMMANDS =~ $1 ]]; then
    /opt/lampp/lampp $1

  elif [[ $1 == "gui" ]]; then
    gksu /opt/lampp/manager-linux*.run &

else
  echo "
Usage: xampp <command>

  start         Start XAMPP (Apache, MySQL and eventually others)
  startapache   Start only Apache
  startmysql    Start only MySQL
  startftp      Start only ProFTPD

  stop          Stop XAMPP (Apache, MySQL and eventually others)
  stopapache    Stop only Apache
  stopmysql     Stop only MySQL
  stopftp       Stop only ProFTPD

  reload        Reload XAMPP (Apache, MySQL and eventually others)
  reloadapache  Reload only Apache
  reloadmysql   Reload only MySQL
  reloadftp     Reload only ProFTPD

  enablessl     Enable SSL support for Apache
  disablessl    Disable SSL support for Apache

  restart       Stop and start XAMPP
  security      Check XAMPP's security
  backup        Make backup file of your XAMPP config, log and data files
  oci8          Enable the oci8 extenssion

  gui           Graphic interface for XAMPP
"
fi